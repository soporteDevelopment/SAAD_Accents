@using System.Web.MVC;
@using System.Web.Helpers;
@using ADSystem.Helpers;
@model ADEntities.ViewModels.RepairViewModel

<style>
    .center {
        text-align: center;
    }

    .center form {
        display: inline-block;
    }
</style>

<br />
<div class="panel panel-default" data-ng-controller="DetailController">
    <div class="panel-body">
        <div class="row">
            <div class="col-md-12 center">
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label><b>Número</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="number = '@Model.Numero'"><b>{{number}}</b></span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label class="col-sm-"><b>Fecha Salida</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="dateTimeOut = '@Model.FechaSalida'">{{dateTimeOut}}</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label class="col-sm-"><b>Fecha Regreso</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="dateTimeIn = '@Model.FechaRegreso'">{{dateTimeIn}}</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label class="col-sm-"><b>Destino</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="destiny = '@Model.Destino'">{{destiny}}</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label class="col-sm-"><b>Responsable</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="responsable = '@Model.Responsable'"><i>{{responsable}}</i></span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-right">
                        <label class="col-sm-"><b>Comentario</b></label>
                    </div>
                    <div class="col-sm-6 text-left">
                        <span data-ng-init="comments = '@Model.Comentarios'"><i>{{comments}}</i></span>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <h3 class="panel-title">Detalle</h3>
        <br />
        <div class="row" data-ng-init="Init(@Model.idReparacion, @Newtonsoft.Json.JsonConvert.SerializeObject(Model.lDetalle))">
            <div class="col-md-2 text-center">
                <span class="color-red">Imagen</span>
            </div>
            <div class="col-md-3 text-center">
                <span class="color-red">Código</span>
            </div>
            <div class="col-md-1 text-center">
                <span class="color-red">Salida</span>
            </div>
            <div class="col-md-1 text-center">
                <span class="color-red">Pendiente</span>
            </div>
            <div class="col-md-2 text-center">
                <span class="color-red">Ingeso</span>
            </div>
            <div class="col-md-3 text-center">
                <span class="color-red">Sucursal</span>
            </div>
            <br />
            <br />
            <div class="col-md-12">
                <div class="row" ng-repeat="item in items">
                    <div class="col-md-2 text-center"><img class="img-product-list" src="{{item.Producto.urlImagen}}" /></div>
                    <div class="col-md-3 text-center">{{item.Producto.Codigo}}</div>
                    <div class="col-md-1 text-center">{{item.Cantidad}}</div>
                    <div class="col-md-1 text-center">{{item.Pendiente}}</div>
                    <div class="col-md-2 text-center">
                        <input type="number" id="dev{{item.idDetalleReparacion}}" style="width:60px;" ng-model="item.Ingreso" value="0" ng-hide="item.Pendiente == 0" min="0" max="{{item.Pendiente}}" ng-readonly="item.Pendiente == 0"/>
                    </div>
                    <div class="col-md-3 text-center">
                        <select class="form-control" ng-model="item.idSucursal">
                            <option value="2">Amazonas</option>
                            <option value="3">Guadalquivir</option>
                            <option value="4">Textura</option>
                        </select>
                    </div>
                </div><br>
                <br />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 center">
                <button type="button" id="SaveUpdateStock" class="btn btn-primary button-search" data-loading-text='Guardando...' data-ng-init="estatus = @Model.Estatus" ng-disabled="estatus != 2" data-ng-click="SaveUpdate(@Model.idReparacion)">Guardar</button>
            </div>
        </div>
    </div>
</div>


