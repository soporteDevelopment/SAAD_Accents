@using System.Web.MVC;
@using System.Web.Helpers;
@using ADSystem.Helpers;

@{
    ViewBag.Title = "Perfiles";
    Layout = "~/Views/Shared/_LayoutGeneral.cshtml";
}

<script type="text/javascript" src="@Url.Js("Class/Profiles")"></script>
<script type="text/javascript" src="@Url.Js("lodash-3.10.1")"></script>

<br />
<section class="container-form">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Actualizar Perfil</h3>
        </div>
        <div class="panel-body" data-ng-controller="ProfilesController">
            <form class="form-horizontal">

                <div class="form-group">
                    <label class="col-sm-2 control-label">Perfil</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" maxlength="100" id="profile" data-ng-model="name" data-ng-init="name='@Model.Perfil'" placeholder="Escriba el nombre del perfil" uppercase />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label"></label>
                    <div class="col-sm-10">
                        <button class="btn btn-primary" data-ng-click="SelectAllActions()">Todas</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Acciones</label>
                    <div class="col-sm-10">
                        <ul class="list-group" data-ng-model="list" data-ng-init="list= @ViewBag.Actions">
                            <li class="list-group-item" data-ng-repeat="item in list">
                                <span id="{{item.idControl}}">{{item.Control}}</span>
                                <ol>
                                    <li data-ng-repeat="subItem in item.lAcciones">
                                        <input type="checkbox" id="{{subItem.idAction}}" data-ng-model="subItem.Selected" data-ng-checked="subItem.Selected">{{subItem.Accion}}
                                    </li>
                                </ol>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="form-group">
                    @Html.Raw(HtmlHelperExtension.Button("Profiles", "SaveUpdateProfile", "SaveUpdateProfile", "SaveUpdateProfile", "Guardar", "", "", "SaveUpdateProfile(" + Model.idPerfil  + ")", "btn btn-primary", "Guardando..."))
                </div>

            </form>
        </div>
    </div>
</section>

